<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<!--<a href="./RoomCharge.apk" download="RoomCharge.apk">下载</a>-->
  <div onclick="downloadApk()">下载</div>
</body>
<script type="text/javascript" src="./download.min.js"></script>
<!--<script type="text/javascript" src="./jquery.min.js"></script>-->
<script>
  function downloadApk() {
    // window.open("./RoomCharge.apk")
    download("RoomCharge.apk")

    // let xhr = new XMLHttpRequest();
    // xhr.open('get','RoomCharge.apk',true)
    // xhr.send()

    // var x=new XMLHttpRequest();
    // x.open( "GET", "RoomCharge.apk" , true);
    // x.responseType="blob";
    // x.onload= function(e){
    //   var a = document.createElement('a');
    //   a.download = 'RoomCharge.apk';
    //   a.href = e.target.result;
    //   $("body").append(a);    // 修复firefox中无法触发click
    //   a.click();
    //   $(a).remove();
    // };
    // x.send();

  //   jQuery.ajax({
  //     type: "get",
  //     url: "./RoomCharge.apk",
  //     dataType: 'apk',
  //     success: function (data) {
  //       var a = document.createElement('a');
  //       a.download = 'RoomCharge.apk';
  //       a.href = e.target.result;
  //       $("body").append(a);    // 修复firefox中无法触发click
  //       a.click();
  //       $(a).remove();
  //     },
  //     error: function (data) {
  //       // alert("对不起，出现错误，请稍后重试或联系管理员");
  //     }
  //   });
  }

  // function downloadApk() {
  //
  //   var url = 'RoomCharge.apk';
  //
  //   var xhr = new XMLHttpRequest();
  //
  //   xhr.open('GET', url, true);        // 也可以使用POST方式，根据接口
  //
  //   xhr.responseType = "blob";    // 返回类型blob
  //
  //   // 定义请求完成的处理函数，请求前也可以增加加载框/禁用下载按钮逻辑
  //
  //   xhr.onload = function () {
  //
  //     // 请求完成
  //
  //     if (this.status === 200) {
  //
  //       // 返回200
  //
  //       var blob = this.response;
  //
  //       var reader = new FileReader();
  //
  //       reader.readAsDataURL(blob);    // 转换为base64，可以直接放入a表情href
  //
  //       reader.onload = function (e) {
  //
  //         // 转换完成，创建一个a标签用于下载
  //
  //         var a = document.createElement('a');
  //
  //         a.download = 'RoomCharge.apk';
  //
  //         a.href = e.target.result;
  //
  //         $("body").append(a);    // 修复firefox中无法触发click
  //
  //         a.click();
  //
  //         $(a).remove();
  //
  //       }
  //
  //     }
  //
  //   };
  //
  //   // 发送ajax请求
  //
  //   xhr.send()
  //
  // }
</script>
</html>
